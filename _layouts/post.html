---
layout: default
---

<style>
  .post {
    padding: 6px 28px;
  }
  .post-meta {
    font-size: 12px;
    color: #686868;
  }
  /* TOC 容器样式 */
    #auto-toc {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      display: block !important;
      visibility: visible !important;
    }
    /* TOC 标题 */
    #toc-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 10px;
    }
    /* TOC 列表 */
    #toc-list {
      list-style: none;
      padding-left: 20px;
      margin: 0;
    }
    #toc-list li {
      margin: 8px 0;
    }
    #toc-list li ul {
      padding-left: 20px;
      margin-top: 5px;
    }
    /* TOC 链接 */
    #toc-list a {
      color: #007bff;
      text-decoration: none;
    }
    #toc-list a:hover {
      text-decoration: underline;
    }
    /* 文章内容样式 */
    .post-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 0 20px;
    }
    .post-header {
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
      margin-bottom: 20px;
    }
    /* 锚点跳转偏移（避免被导航栏遮挡） */
    :target {
      scroll-margin-top: 80px;
    }
</style>
<article class="post">
   <div id="auto-toc" >
      <div id="toc-title">文章目录</div>
      <ul id="toc-list"></ul>
    </div>
  <div class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    <div class="post-meta">日期：{{ page.date | date: "%Y/%m/%d" }}</div>
  </div>
  <div class="post-content" >
    {{ content }}
  </div>
</article>
  <script>
    // 页面加载完成后执行
    window.addEventListener('DOMContentLoaded', function() {
      // 获取 TOC 列表容器
      const tocList = document.getElementById('toc-list');
      // 获取文章中的 h2/h3 标题（可修改为 h2-h4）
      const headings = document.querySelectorAll('.post-content h2, .post-content h3');
      
      // 如果没有标题，显示“暂无目录”
      if (headings.length === 0) {
        tocList.innerHTML = '<li style="color:#666;">暂无目录</li>';
        return;
      }

      // 临时存储 h2 节点，用于嵌套 h3
      let currentH2Li = null;

      // 遍历所有标题，生成 TOC 项
      headings.forEach((heading, index) => {
        // 为标题添加唯一 ID（如果没有）
        const headingId = heading.id || `toc-heading-${index}`;
        heading.id = headingId;

        // 创建列表项
        const li = document.createElement('li');
        // 创建跳转链接
        const a = document.createElement('a');
        a.href = `#${headingId}`;
        a.textContent = heading.textContent.trim(); // 去掉标题前后空格

        li.appendChild(a);

        // 区分 h2 和 h3，实现层级嵌套
        if (heading.tagName === 'H2') {
          // h2 直接添加到根列表
          tocList.appendChild(li);
          // 记录当前 h2，用于嵌套后续的 h3
          currentH2Li = li;
        } else if (heading.tagName === 'H3' && currentH2Li) {
          // h3 嵌套到最近的 h2 列表项中
          let subUl = currentH2Li.querySelector('ul');
          if (!subUl) {
            subUl = document.createElement('ul');
            currentH2Li.appendChild(subUl);
          }
          subUl.appendChild(li);
        }
      });
    });
  </script>
